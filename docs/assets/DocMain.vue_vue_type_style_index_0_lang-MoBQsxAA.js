import{d as E,p as u,x as g,y,z as A,o as f,c as i,a as _,r as T,F as B,j as C,t as S,n as b,l as L,A as $}from"./index-AcABN1G1.js";const z={class:"doc-wrapper"},D={key:0},F=["href"],M=E({__name:"DocMain",props:{hasAside:{type:Boolean,default:!0}},setup(x){const k=x,o=u(),r=u([]),d=u("");function v(t,l,s){const e=t[l].offset;t[l].offset=[e[0],s]}const h=$(()=>{p()},200);function p(){let t=0;o.value!=null&&(t=o.value.scrollTop);let l="",s=-1;for(let e=0,n=r.value.length;e<n;e++){const a=r.value[e];t>=a.offset[0]&&t<a.offset[1]&&(l=a.text,s=e)}s<=0&&(l=""),d.value=l}return g(()=>{k.hasAside&&y(()=>{if(o.value!=null){const t=o.value.offsetTop,l=o.value.scrollHeight,s=o.value.querySelectorAll("h2,h3"),e=[];let n=-1;for(const a of s){const c=a.textContent;if(c!=null){a.id=c;const m=a.offsetTop-t;e.push({text:c,offset:[m,-1]}),n!==-1&&v(e,n,m),n++}}n!==-1&&v(e,n,l),e.sort((a,c)=>a.offset[0]-c.offset[0]),r.value=e,p(),r.value.length>0&&o.value.addEventListener("scroll",h)}})}),A(()=>{o.value!=null&&o.value.removeEventListener("scroll",h)}),(t,l)=>(f(),i("div",z,[_("div",{ref_key:"scollEl",ref:o,class:"nt-scrollbar doc-main"},[T(t.$slots,"default")],512),t.hasAside&&r.value.length>0?(f(),i("ul",D,[(f(!0),i(B,null,C(r.value,s=>(f(),i("li",{key:s.text},[_("a",{class:b({"aside-item--active":d.value===s.text,"sub-aside-link":!0}),href:"#"+s.text},S(s.text),11,F)]))),128))])):L("",!0)]))}});export{M as _};
