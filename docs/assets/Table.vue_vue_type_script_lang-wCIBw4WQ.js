import{d as p,p as w,m as s}from"./index-TCyWjmXV.js";const v=p({props:{columns:{type:Array,required:!0},stripe:{type:Boolean,default:!0,required:!1},fixedHead:{type:Boolean,default:!1,required:!1},data:{type:Array,required:!0},columnKey:{type:String,required:!1}},emits:["sort-change"],setup(l,{emit:h}){const o=w({key:"",order:""});function y(){const a=l.columns.length;if(l.columns[0].fixed||l.columns[a-1].fixed)return!0;let r=!1;for(let n=0;n<a;n++)if(l.columns[n].fixed){r=!0;break}return r}let x=y();function m({sorter:a,key:r,index:n}){if(a===!0){let i=r,d="";r===o.value.key?o.value.order==="asc"?d="desc":i="":d="asc",o.value={order:d,key:i},h("sort-change",{key:i,order:d,index:n})}}function g(){const a=[];let r=[],n=[];for(let i=0,d=l.columns.length;i<d;i++){const e=l.columns[i];e.defaultSortOrder!=null&&o.value.key===""&&(o.value={key:e.key||"",order:e.defaultSortOrder});const f={class:{"sort-column":e.sorter===!0,"sort-asc":o.value.key===e.key&&o.value.order==="asc","sort-desc":o.value.key===e.key&&o.value.order==="desc","nt-fixed":e.fixed},style:{}};if(e.fixed&&(e.fixed==="left"?f.style.left=r.length===0?"0":`calc(${r.join("+")})`:f.style.right=n.length===0?"0":`calc(${n.join("+")})`),e.width){let t=e.width;typeof e.width=="number"&&(t=`${e.width}px`),f.style.width=t,e.fixed!=null&&(e.fixed==="left"?r.push(t):n.push(t))}e.sorter===!0&&(f.onClick=()=>{m({key:e.key||"",index:i,order:"asc",sorter:e.sorter})}),a.push(s("th",f,[s("span",e.title),e.sorter===!0?s("span",{class:"caret-wrapper"},[s("span",{class:"sort-caret ascending"}),s("span",{class:"sort-caret descending"})]):null]))}return a}function k(){const a=[];for(let r=0,n=l.data.length;r<n;r++){const i=l.data[r];let d=[],e=[];const f=[];for(const t of l.columns){const u={style:{},class:{"nt-fixed":t.fixed}};if(t.fixed&&(t.fixed==="left"?u.style.left=d.length===0?"0":`${d.join("+")}`:u.style.right=e.length===0?"0":`${d.join("+")}`),t.width){let c=t.width;typeof t.width=="number"&&(c=`${t.width}px`),u.style.width=c,t.fixed!=null&&(t.fixed==="left"?d.push(c):e.push(c))}t.render!=null?f.push(s("td",u,t.render(i,r))):t.key!=null?f.push(s("td",u,i[t.key])):f.push(s("td",u,""))}a.push(s("tr",f))}return a}return()=>s("table",{class:["nt-table",l.stripe?"nt-table-stripe":"",x?"nt-table-fixed":""]},[s("thead",s("tr",{class:{"nt-fixed":l.fixedHead},style:{top:l.fixedHead?"0":void 0}},g())),s("tbody",l.data.length===0?s("td",{class:"ph-table__none-col",colspan:l.columns.length},"暂无数据记录!"):k())])}});export{v as _};
